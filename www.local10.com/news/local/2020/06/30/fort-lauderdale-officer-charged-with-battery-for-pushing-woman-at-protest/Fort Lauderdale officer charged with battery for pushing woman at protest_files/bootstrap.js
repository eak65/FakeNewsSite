!function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e){!function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getTagData=function(){var t;try{t=document.currentScript,t.getAttribute("data-siteKey")&&t.getAttribute("data-pubKey")||(t=document.getElementById("browsi-tag"))}catch(e){t=document.getElementById("browsi-tag")}if(!t)throw new Error("no tag");var e=this.getSessionStorage("__browsienv")||t.getAttribute("data-browsidomain")||".browsiprod.com";return{tag:t,sk:t.getAttribute("data-siteKey")||"error",pk:t.getAttribute("data-pubKey")||"error",ds:e,y:"yield-manager"+e,es:"//events"+e+"/events/",fp:t.hasAttribute("prebidbpt"),mt:t.hasAttribute("master"),pd:t.prebidData}},t.getSessionStorage=function(t){var e;try{e=sessionStorage.getItem(t)}catch(t){}return e||""},t.getD=function(){var t=this.getSessionStorage("__brwsidbg"),e={};return t&&(e=JSON.parse(t)),e},t.isD=function(){var e=t.getD();return!(!e||!e.hasOwnProperty("debug"))},t.isObject=function(t){return t&&"object"==typeof t&&!Array.isArray(t)},t.mergeDeep=function(t,e){if(this.isObject(t)&&this.isObject(e))for(var i in e)e.hasOwnProperty(i)&&this.isObject(e[i])?(t[i]||Object.assign(t,(o={},o[i]={},o)),this.mergeDeep(t[i],e[i])):Object.assign(t,(n={},n[i]=e[i],n));return t;var o,n},t.generateToken=function(){var t="abcdefghijklmnopqrstuvwxyz";t+=t.toUpperCase()+"_";for(var e="",i=0;i<10;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t.getCookie=function(t){var e=(this.getTopDocument()||document).cookie.split(/\s*;\s*/).map(function(t){var e=t.split(/\s*=\s*/);if(e&&2===e.length)return{key:e[0],value:e[1]}}).find(function(e){return e&&e.key===t});return e?e.value:""},t.setCookie=function(t,e,i,o){void 0===e&&(e=""),void 0===i&&(i=0),void 0===o&&(o="d");var n=6e4;"d"===o&&(n*=1440);var r=new Date(+new Date+i*n);(this.getTopDocument()||document).cookie=t+"="+e+"; expires="+r.toUTCString()+"; path=/"},t.setLocalStorage=function(t,e){try{localStorage.setItem(t,e)}catch(t){}},t.getLocalStorage=function(e){try{return(t.getTopWindow()||window).localStorage.getItem(e)||""}catch(t){}return""},t.toUrlParams=function(t){return Object.keys(t).map(function(e){return e+"="+("object"==typeof t[e]?encodeURIComponent(JSON.stringify(t[e])):encodeURIComponent(t[e]))}).join("&")},t.getHead=function(t){return t.head||t.getElementsByTagName("head")[0]},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t.getTopWindow=function(){try{return window.top.document,window.top}catch(t){return null}},t.getTopDocument=function(){try{return window.top.document}catch(t){return null}},t.getResolution=function(){var t=this.getTopWindow()||window;return t.screen.width+"x"+t.screen.height},t.findDomPosition=function(e){for(var i=e,o=window!==t.getTopWindow();i;)switch(i.tagName){case"HEAD":return o?"iframe.head":"head";case"BODY":return o?"iframe.body":"body";default:i=i.parentElement}return"NA"},t.getWindow=function(){var e=t.getTopWindow();return null===e?window:e},t.isPositionContained=function(t,e){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)},t.isDesktopResponse=function(t){return t&&t.dt&&t.dt.p&&"DESKTOP"===t.dt.p},t.getUA=function(){return window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""},t.isVisible=function(t){return this.isCssVisible(t)&&this.hasValidSize(t)},t.isCssVisible=function(t){var e=window.getComputedStyle(t);return!!e&&("visible"===e.getPropertyValue("visibility")&&"none"!==e.getPropertyValue("display")&&"0"!==e.getPropertyValue("opacity"))},t.hasValidSize=function(t){var e=t.getBoundingClientRect();return e.height>0&&e.width>0},t.getGoogletag=function(){return t.googleTag&&t.googleTag.cmd||(window.top.googletag=window.top.googletag||{},window.top.googletag.cmd=window.top.googletag.cmd||[],t.googleTag=window.top.googletag),t.googleTag},t.getUrlParams=function(){var t=window.top.document.location.search.substring(1);if(0===t.length)return{};var e={};return t.split("&").forEach(function(t){var i=t.split("=");2===i.length&&i[0]&&(e[i[0]]=i[1])}),e},t.isLightDebug=function(){if(void 0===t.lightDebug){var e=this.getUrlParams();t.lightDebug="true"===e.browsiDebug}return t.lightDebug},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0);!function(t){t.INFO="info",t.ERROR="error",t.CUSTOM="custom",t.DEBUG="debug"}(e.LogTypes||(e.LogTypes={}));var n=function(){function t(t){this.className=t,this.isActive=!!o.default.getD().debug}return t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logMessage("info",t)},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logMessage("debug",t)},t.prototype.custom=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=[{msg:t,style:e,args:i}];this.logMessage("custom",n)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logMessage("error",t)},t.prototype.lightLog=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o.default.isLightDebug()&&console.info("%c[Browsi]: "+t,"background: yellow; color: black; font-weight: bold; text-decoration:underline; font-size: 14px;",e)},t.prototype.logMessage=function(t,e){this.isActive&&("custom"!==t?console[t].apply(console,["["+this.className+"]"].concat(e)):console.info("%c["+this.className+"] "+e[0].msg,e[0].style,e[0].args))},t}();e.Logger=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),n=i(1),r=i(3),s=function(){function t(){this.tagData=o.default.getTagData(),this.eventsHost=this.tagData.es,this.logger=new n.Logger("Events")}return t.get=function(){return t._instance||(this._instance=new t),t._instance},t.prototype.getStaticFields=function(){if(!this.staticFields&&this.loaderParams){var t=window.top.document;this.staticFields=Object.assign({},this.buildStaticData(),{r:document.referrer.toLowerCase(),url:encodeURIComponent(t.location.protocol+"//"+t.location.host+t.location.pathname),res:window.top.screen.width+"x"+window.top.screen.height})}return this.staticFields},t.prototype.buildStaticData=function(){var t=this.loaderParams.dt||{};return{sk:this.loaderParams.i.sk,pk:this.loaderParams.i.pk,pvid:this.loaderParams.i.pv,bpid:this.loaderParams.bpvi,aid:this.loaderParams.i.aid,scid:this.loaderParams.i.sc,db:t.b||"",dbt:t.bt||"",d:t.d||"",dp:t.p||"",dv:t.v||"",dos:t.os||"",dosv:t.osv||"",ibpv:this.loaderParams.r.b,geo:this.loaderParams.r.cc,ts:this.loaderParams.r.ts,mv:this.loaderParams.e.v,iru:this.loaderParams.r.ru}},t.prototype.sendInitialHit=function(t,e){var i={now:Math.floor(Date.now()/1e3),et:"initial_hit",to:+new Date-e,url:encodeURIComponent(t.url),res:o.default.getResolution(),uid:t.uid,sk:t.sk,pk:t.pk,r:t.r,sid:t.sid,bpvid:t.bpvid,ua:o.default.getUA(),tp:o.default.findDomPosition(this.tagData.tag),ta:null!==o.default.getTopWindow(),mv:t.mv,src:(this.tagData.mt?"(mt)":"")+"bpt"};this.logger.lightLog("Initiated"),this.send(i,"supply",i.et,i.bpvid)},t.prototype.sendPapMatchedEvent=function(t,e,i,o,n,r,s,a,u){var d=Object.assign({},this.getStaticFields(),{now:Math.floor(Date.now()/1e3),et:"pap_matched",to:+new Date-r,plid:t,au:e,w:o.w,h:o.h,im:i,rc:s});this.send(d,"demand",d.et,this.staticData.pvid)},t.prototype.send=function(t,e,i,n){var s=new XMLHttpRequest;if(s.open("POST",""+this.eventsHost+e+"?p="+n,!0),s.send(JSON.stringify([t])),this.logger.custom(e+"/"+i,"background: #AAFF7F; color: black; font-weight: bold; text-decoration:underline; font-size: 18px;",t),o.default.isD()){(r.Output.getValue("firedEvents")||r.Output.setKeyValue("firedEvents",[])).push(t)}},t.prototype.sendError=function(t,e,i,n){var r=window.top.document,s=Object.assign({},{now:Math.floor(Date.now()/1e3),to:+new Date-i,et:"crash",bpid:e.bpvid,sk:e.sk,pk:e.pk,uid:e.uid,sid:e.sid,file:t.filename,lineNo:t.lineno||-1,columnNo:t.colno||-1,msg:t.message+"; "+n,error:t.error,r:e.r,url:encodeURIComponent(r.location.protocol+"//"+r.location.host+r.location.pathname),res:o.default.getResolution(),pvid:"",ibpv:!1,geo:"",ts:"",db:"",dbt:"",d:"",dp:"",dv:"",dos:"",dosv:"",mv:"",iru:!1,scid:""});if(this.loaderParams&&(s=Object.assign(s,this.getErrorData())),o.default.getD().debug)this.logger.error(s);else{var a=new XMLHttpRequest;a.open("POST",this.tagData.es+"engineError",!0),a.send(JSON.stringify([s]))}},t.prototype.getErrorData=function(){var t=this.loaderParams.dt;return{pvid:this.loaderParams.i.pv,ibpv:this.loaderParams.r.b,geo:this.loaderParams.r.cc,ts:this.loaderParams.r.ts,db:t.b,dbt:t.bt,d:t.d,dp:t.p,dv:t.v,dos:t.os,dosv:t.osv,mv:this.loaderParams.e.v,iru:this.loaderParams.r.ru,scid:this.loaderParams.i.sc}},t.prototype.setLoaderParams=function(t){this.loaderParams=t},t.prototype.setStaticData=function(t){this.staticData=t},t}();e.Events=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),n=function(){function t(){}return t.setKeyValue=function(t,e){return this.validateOutput(),Object.assign((o.default.getTopWindow()||window)[this.bptOut],(i={},i[t]=e,i)),(o.default.getTopWindow()||window)[this.bptOut][t];var i},t.validateOutput=function(){return(o.default.getTopWindow()||window).hasOwnProperty(this.bptOut)||((o.default.getTopWindow()||window)[this.bptOut]={}),(o.default.getTopWindow()||window)[this.bptOut]},t.getValue=function(t){return this.validateOutput()[t]},t.bptOut="bptOut",t}();e.Output=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.setLoaderParams=function(t){this.loaderParams=t},t.createBrowsiTag=function(){var t={__bbs:{g_fpa_d:this.getFoundPublisherAdDataLite.bind(this)}};this.browsiTag=Object.assign(window.top.browsitag||{},t),window.top.browsitag=this.browsiTag},t.extendBrowsiTag=function(t){return this.browsiTag=Object.assign(this.browsiTag,t),this.browsiTag},t.getFoundPublisherAdDataLite=function(t){if(t&&t.p){var e=this.getPostMacroPlacementId(t);return e?{plid:e}:null}return null},t.getPostMacroPlacementId=function(e){if(!e||!e.p)return null;switch(e.p){case"dfp":var i=e.args;return t.getDFPPlacementId(i.slot);case"manual_ad":var o=e.args,n=this.loaderParams.e.mcm;return n?t.evaluate(n,o.plid):o.plid;default:return null}},t.evaluate=function(t,e,i,o){var n=t.p.replace(/['"]+/g,"").replace(/<DIV_ID>/g,e);return i&&(n=n.replace(/<AD_UNIT>/g,i)),o&&(n=n.replace(/<KEY_([A-Za-z0-9_-]+)>/g,o)),t.s&&(n=n.substring(t.s.s,t.s.e)),n},t.getDFPPlacementId=function(t){var e=this.loaderParams.e.mcp;if(e){return this.evaluate(e,t.getSlotElementId(),t.getAdUnitPath(),function(e,i){return i&&t.getTargeting(i).join("_")||"NA"})}return t.getSlotElementId()},t}();e.default=o},function(t,e,i){t.exports=i(6)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),n=i(2),r=i(0),s=i(1),a=i(3);i(9);var u=i(10),d=i(4),l=function(){function t(){this.startTime=+new Date,this.tagData=r.default.getTagData(),this.doc=r.default.getTopDocument()||document,this.logger=new s.Logger("app"),this.pvidVarName="__brpvid",this.listenToErrors(),this.debugConfiguration=r.default.getD(),this.staticData=this.buildStaticData(this.debugConfiguration.siteKey),n.Events.get().setStaticData(this.staticData),this.consentManager=new u.ConsentManager}return t.prototype.run=function(){var t=this;this.getStoredPvid()||n.Events.get().sendInitialHit(this.staticData,this.startTime),this.isBootstrapLoaded()||(this.setBootstrapLoaded(),this.waitForPromise(function(){return t.getSupply()}))},t.prototype.setBootstrapLoaded=function(){(r.default.getTopWindow()||window).browsi_bootstrap_loaded=this.staticData.bpvid},t.prototype.getSupply=function(){var t=this;return this.appendGetSupplyScript().then(function(e){d.default.setLoaderParams(e),d.default.createBrowsiTag();var i=t.getPapResponse(e);if(i&&new o.PapAgent(i,t.staticData,t.startTime,t.getKeyValueName(e)).run(),e.preEngineUrl?t.executeRule(e):t.getMiddy(e),e.pabp&&!(r.default.getTopWindow()||window).document.getElementById("__bpabh")){var n=t.buildScriptTag(e.pabp);n.id="__bpabh",r.default.getHead((r.default.getTopWindow()||window).document).appendChild(n)}}).catch(function(e){t.logger.error(e)})},t.prototype.getPapResponse=function(t){var e=null;return t.od&&t.od.p?e=t.od.p:this.tagData.pd&&this.tagData.pd.p&&(e={pl:this.tagData.pd.p,am:!0,pv:this.tagData.pd.pv}),e?Object.assign({},e,{mcp:t.e.mcp,mcm:t.e.mcm}):null},t.prototype.getKeyValueName=function(t){return t.e.pkv.p},t.prototype.waitForPromise=function(t){if((r.default.getTopWindow()||window).Promise)t();else{this.logger.info("fetching Promise polyfill");var e=this.buildScriptTag("https://middycdn-a.akamaihd.net/tag/promise.js");e.onload=function(){t()},r.default.getHead((r.default.getTopWindow()||window).document).appendChild(e)}},t.prototype.executeRule=function(t){window.top.__browsiLoadFunc=this.getMiddy.bind(this),window.top.__browsiLoadObject=t,r.default.getHead(this.doc).appendChild(this.buildScriptTag(t.preEngineUrl))},t.prototype.buildLoader=function(t){var e=t&&t.i&&t.i.s,i=t&&t.i&&t.i.u;t&&(t.i&&(t.i.sk=this.tagData.sk,t=Object.assign({},t,{bpvi:this.staticData.pvid,yhn:this.tagData.y,to:this.startTime})),t=Object.assign({},t,{h:t.e&&t.e.h,version:t.e&&t.e.v})),r.default.setCookie("__browsiSessionID",e,30,"m"),r.default.setCookie("__browsiUID",i,365,"d"),r.default.setLocalStorage("__browsiUID",i);var o={sid:e,uid:i};return r.default.setLocalStorage("__brtd",JSON.stringify(o)),t},t.prototype.isBootstrapLoaded=function(){return!!(r.default.getTopWindow()||window).browsi_bootstrap_loaded},t.prototype.getPreviousBpvid=function(){return(r.default.getTopWindow()||window).browsi_bootstrap_loaded},t.prototype.appendGetSupplyScript=function(){var t=this;return new Promise(function(e,i){var o="__bgscb_"+r.default.generateToken();t.handleSpecialUsersSession();var s=Date.now(),a=t.createGetSupplyScriptTag(o,e,i,s);try{r.default.getHead(t.doc).appendChild(a)}catch(e){n.Events.get().sendError(e,t.staticData,t.startTime,"catch; "+a.src+" bodyExists: "+!!window.top.document.body),t.doc.body&&t.doc.body.appendChild(a)}t.logger.info("getSupply sent")})},t.prototype.handleSpecialUsersSession=function(){var t=r.default.getUA(),e=r.default.getLocalStorage("__brw_ua"),i=!e;i||t===e||(this.logger.custom("revoking session","background: orange; color: black; font-weight: bold; font-size: 18px;"),r.default.setCookie("__browsiSessionID"),this.staticData.sid="",r.default.setLocalStorage("__brw_ua",t)),i&&r.default.setLocalStorage("__brw_ua",t)},t.prototype.createGetSupplyScriptTag=function(t,e,i,o){var s=this,u=this.buildScriptTag(this.buildGetSupplyUrl(t));return u.setAttribute("referrerPolicy","no-referrer-when-downgrade"),r.default.isD()&&(u.onload=function(){a.Output.setKeyValue("supplyLoaded",!0)},a.Output.setKeyValue("supplyRequest",u)),(r.default.getTopWindow()||window)[t]=function(t,u){if(s.logger.info("getSupply received"),t&&!t.error){r.default.isD()&&a.Output.setKeyValue("supplyResponse",t);var d=s.buildLoader(t);return s.staticData.pvid=d.i.pv,r.default.isLightDebug()&&(d.lightDebug=!0),o&&(d.srt=(Date.now()-o).toFixed(2)),r.default.mergeDeep(d,s.debugConfiguration),u&&"object"==typeof u&&u.jsURL&&(d.preEngineUrl=u.jsURL),n.Events.get().setLoaderParams(d),e(d)}return i(t)},u},t.prototype.buildScriptTag=function(t){var e=this,i=document.createElement("script");return i.src=t,i.async=!0,i.setAttribute("crossorigin","anonymous"),i.onerror=function(i){n.Events.get().sendError(i,e.staticData,e.startTime,"onerror "+t)},i},t.prototype.getMiddy=function(t,e){e&&"function"==typeof e.preEngineJS&&(t.externalFlowHandler={preEngine:e.preEngineJS}),window.top._middyo=t;var i=this.buildMiddyUrl(t);try{r.default.getHead(this.doc).appendChild(this.buildScriptTag(i))}catch(t){n.Events.get().sendError(t,this.staticData,this.startTime,"catch; "+i+" bodyExists: "+!!window.top.document.body),this.doc.body&&this.doc.body.appendChild(this.buildScriptTag(i))}},t.prototype.buildMiddyUrl=function(t){return this.debugConfiguration.middyHost?this.debugConfiguration.middyHost:"//"+(this.debugConfiguration.h||t.e.h)+"/sd/apps/middy/middy-"+(this.debugConfiguration.version||t.e.v)+".js"},t.prototype.getWeightedAvg=function(t,e,i,o){var n=e+o;return n>0?parseFloat(((t*e+i*o)/n).toFixed(2)):0},t.prototype.getAvgOof=function(){var t=JSON.parse(r.default.getLocalStorage("__bus")||"{}");if(t.aof){var e=0,i=0,o=t.aof.sd;for(var n in o)o.hasOwnProperty(n)&&(o[n].arb?i++:o[n].ar&&e++);var s=i/(i+e)||0,a=e+i;return this.getWeightedAvg(t.aof.t_a||0,t.aof.t_i||0,s||0,a)}},t.prototype.buildGetSupplyUrl=function(t){var e=r.default.getTopWindow()||window,i={sk:this.staticData.sk,url:this.staticData.url,bid:this.staticData.bpvid,c:t,at:this.doc.title||null,sw:e.screen&&e.screen.width||-1,sh:e.screen&&e.screen.height||-1,cd:{ec:this.consentManager.getGDPRConsent(),uc:this.consentManager.getCCPAConsent()}},o=JSON.parse(r.default.getLocalStorage("__bus")||"{}");if(Object.keys(o).length>0){var n={bi:o.bi,bv:o.bv,pi:o.pi,pv:o.pv,b_ativ:o.tiv?this.getWeightedAvg(o.tiv.b_ativ||0,o.tiv.b_ai||0,o.tiv.b_pv_ativ||0,o.tiv.b_pv_ai||0):void 0,uva:o.uv?this.getWeightedAvg(o.uv.t_a||0,o.uv.t_i||0,o.uv.pv_a||0,o.uv.pv_i||0):void 0,uvsp:o.uv?this.getWeightedAvg(o.uv.t_sp||0,o.uv.t_si||0,o.uv.pv_sp||0,o.uv.pv_si||0):void 0,oofu:this.getAvgOof()};Object.keys(n).forEach(function(t){return void 0===n[t]?delete n[t]:""}),i.us=n}this.staticData.r&&(i.r=this.staticData.r),this.staticData.sid&&(i.sid=this.staticData.sid),this.staticData.uid&&(i.uid=this.staticData.uid),this.tagData.fp&&(this.logger.info("bootstrap was injected by prebid"),i.rp=!1),r.default.isD()&&a.Output.setKeyValue("supplyParams",i);var s=this.getStoredPvid();return s&&(i.pvid=s,this.resetPvidVar()),"//"+this.tagData.y+"/supply/v3?"+r.default.toUrlParams(i)},t.prototype.getStoredPvid=function(){try{return window[this.pvidVarName]}catch(t){return}},t.prototype.resetPvidVar=function(){window[this.pvidVarName]=void 0},t.prototype.buildStaticData=function(t){var e=this.isBootstrapLoaded()?this.getPreviousBpvid():r.default.generateToken();return{to:+new Date-this.startTime,sk:t||this.tagData.sk,pk:this.tagData.pk,pvid:e,bpvid:e,r:this.doc.referrer,url:this.doc.location.protocol+"//"+this.doc.location.host+this.doc.location.pathname,sid:r.default.getCookie("__browsiSessionID"),uid:r.default.getLocalStorage("__browsiUID")||r.default.getCookie("__browsiUID"),mv:"0.205"}},t.prototype.listenToErrors=function(){var t=this;r.default.getWindow().addEventListener("error",function(e){var i=e&&e.srcElement&&e.srcElement.src&&"SCRIPT"===e.srcElement.tagName?e.srcElement.src:"";(/.*middy|browsi.*/.test(e.filename)||/.*middy|browsi.*/.test(i))&&n.Events.get().sendError(e,t.staticData,t.startTime,i+","+e.filename)},!0),this.logger.info("listening to errors")},t}();e.mainApp=l,(new l).run()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(1),r=i(8),s=i(0),a=i(4),u=function(){function t(t,e,i,o){this.injectedSlots=[],this.papResponse=t,this.staticData=e,this.logger=new n.Logger("PapAgent"),this.startTime=i,this.foundSlots=[],this.listeningToSlotRenderEnded=!1,this.listeningToSlotRequested=!1,this.waitingForApiReady=!1,this.browsiAds=[],this.bootstrapLoadedVariable=window.browsi_bootstrap_loaded,this.predictionKey=o,this.successfulAssignedPlacements=[],this.globalPredictionsObject=null}return t.prototype.run=function(){this.logger.info("papEngine started"),this.listenToGpt(),this.checkSlotBeforeBpt(),this.listenToSlotRequested(),this.listenToSlotRenderEnded(),this.listenToNewSlots(),this.listenToBrowsiAds(),this.handleBrowsiTag()},t.prototype.handleBrowsiTag=function(){this.globalPredictionsObject=this.buildWindowGlobalObject();var t={assignPredictions:this.publisherSelfService.bind(this),apiReady:!0,__grp:this.getRawPredictionResponse.bind(this),__bbs:this.bptBrowsiService()};t=a.default.extendBrowsiTag(t),this.papResponse.ptw&&(window.top.browsiPredictionObject=this.globalPredictionsObject),t.hasOwnProperty("onApiReady")&&"function"==typeof t.onApiReady&&t.onApiReady()},t.prototype.bptBrowsiService=function(){return{grp:this.getRawPredictionResponse.bind(this),gpv:this.getPredictorVersion.bind(this),gav:this.getAverageViability.bind(this),isa:this.isSuccessfullyAssigned.bind(this),g_fpa_d:this.getFoundPublisherAdData.bind(this)}},t.prototype.getPredictorVersion=function(){return this.papResponse.pv},t.prototype.getAverageViability=function(t){var e=this.papResponse.pl[t];return{vs:e?e.vs:void 0,va:e?e.va:void 0}},t.prototype.isSuccessfullyAssigned=function(t){return!!this.successfulAssignedPlacements.find(function(e){return e===t})},t.prototype.getRawPredictionResponse=function(t){if(!t)return null;if(!t.p)return null;switch(t.p){case"dfp":var e=t.args,i=a.default.getDFPPlacementId(e.slot);return this.getRawPrediction(i,e.slot.getAdUnitPath(),e.rc);case"manual_ad":var o=t.args,n=this.papResponse.mcm,r=n?a.default.evaluate(n,o.plid):o.plid;return this.getRawPrediction(r,r,o.rc)}return null},t.prototype.getFoundPublisherAdData=function(t){if(t&&t.p){var e=a.default.getPostMacroPlacementId(t);if(!e)return null;var i=this.papResponse.pl[e];if(!i)return{plid:e,praw:"-1"};var o={plid:e,vps:i.vs,vpa:i.va,pv:this.getPredictorVersion(),praw:this.getRawPredictionResponse(t)||"-1"};if("dfp"===t.p){var n=t.args;n.slot&&(o.isa=this.isSuccessfullyAssigned(n.slot))}return o}return null},t.prototype.getRawPrediction=function(t,e,i){void 0===i&&(i=0);var o=this.papResponse.pl[t];if(!o)return null;if(o.w&&!o.w.includes(e))return null;var n=this.pickPredictionByRefreshCount(o,i,!0);return n?n.toString():null},t.prototype.listenToGpt=function(){var t=this;s.default.getGoogletag().cmd.push(function(){t.logger.verbose("gpt on page")})},t.prototype.listenToBrowsiAds=function(){var t=this;window.top.addEventListener("ban",function(e){e.detail&&t.browsiAds.push(e.detail)},!1),window.top.addEventListener("bar",function(e){var i=e.detail;if(i){var o=t.browsiAds.indexOf(i);o>-1&&t.browsiAds.splice(o,1)}},!1)},t.prototype.buildWindowGlobalObject=function(){return{adUnitPredictions:this.buildAdUnitToPredictionObject(this.papResponse.pl),placementPredictions:this.buildPlacementToPredictionObject(this.papResponse.pl)}},t.prototype.buildPlacementToPredictionObject=function(t){var e=this,i=Object.keys(t).reduce(function(i,o){return i.concat((n={},n[o]=e.getGlobalObjectPrediction(t[o]),n));var n},[]);return Object.assign.apply(Object,[{}].concat(i))},t.prototype.getGlobalObjectPrediction=function(t){var e=this.stringifyPrediction(this.pickPredictionByRefreshCount(t));return"NA"!==e?parseFloat(e):e},t.prototype.buildAdUnitToPredictionObject=function(t){var e=this,i=Object.keys(t).reduce(function(i,o){var n=t[o],r=n.w.map(function(i){return n={},n[i]=e.getGlobalObjectPrediction(t[o]),n;var n});return i.concat(r)},[]);return Object.assign.apply(Object,[{}].concat(i))},t.prototype.pickPredictionByRefreshCount=function(t,e,i){if(void 0===e&&(e=0),t){var o=t.ps&&"number"==typeof t.ps[e]?t.ps[e]:null;return i?o||-1:this.getFlooredPrediction(o)}return-1},t.prototype.stringifyPrediction=function(t){return t>=0?t.toFixed(2):"NA"},t.prototype.getFlooredPrediction=function(t){return t?Math.floor(10*t)/10:-1},t.prototype.publisherSelfService=function(t){if(t){if(this.logger.verbose("publisher requested prediction manually for placement "+t),this.isGoogleApiReady()){var e=this.getNewSlots().find(function(e){return e.getSlotElementId()===t});e&&this.setKeyValues([e])}}else this.logger.verbose("publisher requested prediction manually for all slots"),this.assignKeyValueToNewSlots()},t.prototype.checkSlotBeforeBpt=function(){var t=this;this.isGoogleApiReady()&&this.isGooglePubadsReady()&&s.default.getGoogletag().pubads().getSlots().forEach(function(e){if(e.getResponseInformation()){var i=e.getSlotElementId();if(t.isBrowsiAd(i))return;if(t.isNewFoundSlot(e)){var o=document.getElementById(i);o&&s.default.isVisible(o)&&(t.incrementRefreshCount(e),t.setKeyValues([e],1))}}})},t.prototype.listenToNewSlots=function(){var t=this,e=null,i=setInterval(function(){t.assignKeyValueToNewSlots()},0),o=setInterval(function(){window.top.document.body&&t.isGoogleApiReady()&&s.default.getGoogletag().pubads().getSlots().length>0&&(t.logger.verbose("first slots found, increase interval time"),clearInterval(o),clearInterval(i),t.assignKeyValueToNewSlots(),e=setInterval(function(){t.assignKeyValueToNewSlots()},500))},0);setTimeout(function(){clearInterval(o),clearInterval(i),clearInterval(e),t.logger.verbose("stop listening to slots on timeout")},6e4)},t.prototype.assignKeyValueToNewSlots=function(){var t=this.getNewSlots();t.length&&this.setKeyValues(t)},t.prototype.setKeyValues=function(t,e){var i=this;t.forEach(function(t){if(i.isNewFoundSlot(t)){if(i.pushNewFoundSlot(t),t.getTargeting(i.predictionKey)[0])return;var o=t.getSlotElementId(),n=t.getAdUnitPath(),r=i.extractPredictionData(a.default.getDFPPlacementId(t),e||i.getRefreshCount(t)),s=r.serverPrediction,u=r.predictionString;if(!i.papResponse.am){if(i.papResponse.ptw&&"NA"===u)try{window.top.browsiPredictionObject.adUnitPredictions[n]="NA",window.top.browsiPredictionObject.placementPredictions[o]="NA"}catch(t){}i.isToPush(s,n)?(t.setTargeting(i.predictionKey,u),i.injectedSlots.push(t),i.logger.info("added key value "+i.predictionKey+": "+u+", to placement "+o,document.getElementById(o))):i.logger.info("not assigning key value, placementPrediction:",s)}}})},t.prototype.extractPredictionData=function(t,e){var i=this.papResponse.pl[t],o=this.pickPredictionByRefreshCount(i,e);return{serverPrediction:i,prediction:o,predictionString:this.stringifyPrediction(o)}},t.prototype.isToPush=function(t,e){return!t||t.w.includes(e)},t.prototype.pushNewFoundSlot=function(t){this.foundSlots.push({slot:t,fetchCount:null})},t.prototype.getNewSlots=function(){var t=this;return this.isGoogleApiReady()?s.default.getGoogletag().pubads().getSlots().filter(function(e){return t.isNewFoundSlot(e)&&!t.isBrowsiAd(e.getSlotElementId())}):[]},t.prototype.isNewFoundSlot=function(t){return!this.foundSlots.find(function(e){return e.slot===t})},t.prototype.isGoogleApiReady=function(){return s.default.getGoogletag()&&s.default.getGoogletag().apiReady},t.prototype.isGooglePubadsReady=function(){return s.default.getGoogletag()&&s.default.getGoogletag().pubadsReady},t.prototype.listenToSlotRenderEnded=function(){var t=this;this.listeningToSlotRenderEnded||(s.default.getGoogletag().cmd.push(function(){s.default.getGoogletag().pubads().addEventListener("slotRenderEnded",function(e){if(window.browsi_bootstrap_loaded==t.bootstrapLoadedVariable){var i=e.slot;t.isNewFoundSlot(i)&&t.pushNewFoundSlot(i),t.incrementRefreshCount(i);var n=i.getAdUnitPath(),s=i.getSlotElementId();if(!t.isBrowsiAd(s)){var u=i.getTargeting(t.predictionKey)[0]||null,d=e.isEmpty,l=t.getAdSize(e),c=a.default.getDFPPlacementId(i),p=t.papResponse.pl[c],g=t.getRefreshCount(i),f=t.getRawPrediction(c,n,g);if(!d){var h=t.injectedSlots.find(function(t){return t===i});h?t.papResponse.em&&r.Moat.get().injectMoat(h.getSlotElementId(),t.staticData.sk):t.logger.info("slot "+s+" was not injected on slotRenderEnded")}if(o.Events.get().sendPapMatchedEvent(c,n,!d,l,u,t.startTime,g,t.papResponse.pv,f),!t.papResponse.am&&t.isToPush(p,n)){t.injectedSlots.push(i);var v=t.stringifyPrediction(t.pickPredictionByRefreshCount(p,g+1));i.setTargeting(t.predictionKey,v),t.logger.info("set new key value: "+v+", to placement "+s+", for refresh count "+g,document.getElementById(s))}}}}),t.logger.info("listening to pap_matched")}),this.listeningToSlotRenderEnded=!0)},t.prototype.getRefreshCount=function(t){var e=this.foundSlots.find(function(e){return e.slot===t});return e&&null!=e.fetchCount?e.fetchCount:0},t.prototype.incrementRefreshCount=function(t){var e=this.foundSlots.find(function(e){return e.slot===t});e&&(null===e.fetchCount?e.fetchCount=0:e.fetchCount++)},t.prototype.listenToSlotRequested=function(){var t=this;this.listeningToSlotRequested||(s.default.getGoogletag().cmd.push(function(){s.default.getGoogletag().pubads().addEventListener("slotRequested",function(e){if(t.logger.verbose("ad request for",e.slot.getSlotElementId()),window.browsi_bootstrap_loaded==t.bootstrapLoadedVariable){t.getInjectedPrediction(e.slot)&&t.successfulAssignedPlacements.push(e.slot)}})}),this.listeningToSlotRequested=!0)},t.prototype.getInjectedPrediction=function(t){return t.getTargeting(this.predictionKey)[0]||null},t.prototype.getAdSize=function(t){return t&&Array.isArray(t.size)?{w:t.size[0],h:t.size[1]}:{w:-1,h:-1}},t.prototype.isBrowsiAd=function(t){var e=document.getElementById(t);return!!e&&this.browsiAds.some(function(t){return s.default.isPositionContained(t,e)})},t}();e.PapAgent=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),n=i(0),r=function(){function t(){this.SCRIPT_SRC="//z.moatads.com/browsidisplay14489870757/moatad.js",this.logger=new o.Logger("Moat")}return t.get=function(){return t._instance||(this._instance=new t),t._instance},t.prototype.injectMoat=function(t,e){var i=document.getElementById(t);if(i){this.logger.info("injecting moat for placement "+t,i);var o=document.createElement("script");o.async=!0,o.setAttribute("src",this.generateMoatUrl("dfp",e,-1,-1)),i.appendChild(o)}else this.logger.error("failed to inject moat for placement "+t)},t.prototype.generateMoatUrl=function(t,e,i,o){var r={moatClientLevel1:t,moatClientLevel2:e,moatClientLevel3:i,moatClientLevel4:o};return this.SCRIPT_SRC+"#"+n.default.toUrlParams(r)},t}();e.Moat=r},function(t,e){Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var o=[],n=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)if(r in e){var s=e[r];t.call(n,s,r,e)&&o.push(s)}return o}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o=arguments[1],n=0;n<i;){var r=e[n];if(t.call(o,r,n,e))return r;n++}}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),o=1;o<arguments.length;o++){var n=arguments[o];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},writable:!0,configurable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return!1;for(var n=0|e,r=Math.max(n>=0?n:o-Math.abs(n),0);r<o;){if(function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(i[r],t))return!0;r++}return!1}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),n=function(){function t(){var t=this;this.gdprTracker={isConsent:!1,isCallbackReturned:!1,timeToCallback:-1},this.ccpaTracker={isConsent:!0,isCallbackReturned:!1,timeToCallback:-1},this.logger=new o.Logger("ConsentManager");var e={gdpr:function(){return t.getTimeOffset(t.gdprTracker)},ccpa:function(){return t.getTimeOffset(t.ccpaTracker)}};window.top.browsitag=Object.assign(window.top.browsitag||{},{consentTimeOffsets:e}),this.initialize()}return t.prototype.initialize=function(){this.initializeGDPR(),this.initializeCCPA()},t.prototype.initializeGDPR=function(){var t=window.top.__cmp;if(!t||"function"!=typeof t)return void this.logger.verbose("function __cmp wasn't found");try{this.gdprTracker.timeToCallback=Date.now(),t("getVendorConsents",null,this.setGDPRConsent.bind(this))}catch(t){this.logger.error("Error running __cmp function",t)}},t.prototype.initializeCCPA=function(){var t=window.top.__uspapi;if(!t||"function"!=typeof t)return void this.logger.verbose("function __uspapi wasn't found");try{this.ccpaTracker.timeToCallback=Date.now(),t("getUSPData",1,this.setCCPAConsent.bind(this))}catch(t){this.logger.error("Error running __uspapi function",t)}},t.prototype.setGDPRConsent=function(t,e){if(this.gdprTracker.timeToCallback=Date.now()-this.gdprTracker.timeToCallback,this.gdprTracker.isCallbackReturned=!0,this.logger.info("Time offset to __cmp callback: ",this.gdprTracker.timeToCallback),e&&t){if("boolean"==typeof t.gdprApplies&&t.gdprApplies){if(!t.metadata)return;if(t.purposeConsents&&!t.purposeConsents[1])return}this.logger.verbose("User has given consent (GDPR)"),this.gdprTracker.isConsent=!0}else this.logger.error("Error in __cmp response")},t.prototype.setCCPAConsent=function(t,e){if(this.ccpaTracker.timeToCallback=Date.now()-this.ccpaTracker.timeToCallback,this.ccpaTracker.isCallbackReturned=!0,this.logger.info("Time offset to __uspapi callback: ",this.ccpaTracker.timeToCallback),e&&t){var i=t.uspString;i&&4===i.length&&"Y"===i.charAt(2)&&(this.logger.verbose("User has opted out consent (CCPA)"),this.ccpaTracker.isConsent=!1)}else this.logger.error("Error in __uspapi response")},t.prototype.getGDPRConsent=function(){return this.gdprTracker.isConsent},t.prototype.getCCPAConsent=function(){return this.ccpaTracker.isConsent},t.prototype.getTimeOffset=function(t){return-1!==t.timeToCallback?t.isCallbackReturned?t.timeToCallback:-10:-20},t}();e.ConsentManager=n}])}]);